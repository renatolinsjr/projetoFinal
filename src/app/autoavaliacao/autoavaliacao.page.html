<ion-header>
  <ion-toolbar>
    <ion-buttons>
      <ion-menu-button></ion-menu-button>
      <ion-title class="ion-text-center">
        Autoavaliação
      </ion-title>
      <ion-button [hidden]="!classificaCor" slot="end" (click)="seeClassification()" shape="round">
        <svg [ngClass]="classificaCor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="512" height="512">
          <path d="M495.946,150.531a30.773,30.773,0,0,0-31.619.83l-25.258,15.787c-25.314-9.181-50.807-19.414-75.837-30.466-20.636-9.112-35.69-16.441-47.786-22.33C288.841,101.4,276.691,95.474,255.8,96c-20.4.5-32.248,6.849-51.877,17.36-11.567,6.194-25.963,13.9-47.173,23.326a667.341,667.341,0,0,1-83.566,30.617L47.673,151.361a30.773,30.773,0,0,0-31.619-.83A30.771,30.771,0,0,0,0,177.784V272a30.982,30.982,0,0,0,14.645,26.423L64,329.271v8.247a39.848,39.848,0,0,0,14.335,30.689C163.4,439.179,255.084,440,256,440c80.638,0,141.627-39.234,178.592-72.148A40.045,40.045,0,0,0,448,337.97v-5.536l49.354-30.847A30.98,30.98,0,0,0,512,275.164v-97.38A30.771,30.771,0,0,0,495.946,150.531ZM122.738,296.483A388.2,388.2,0,0,0,256,320a388.177,388.177,0,0,0,133.262-23.517l5.477,15.033A404.123,404.123,0,0,1,256,336a404.149,404.149,0,0,1-138.738-24.483Zm-5.477-56.967,5.477-15.033A388.2,388.2,0,0,0,256,248a388.177,388.177,0,0,0,133.262-23.517l5.477,15.033A404.123,404.123,0,0,1,256,264,404.149,404.149,0,0,1,117.262,239.517ZM23.125,284.854A15.072,15.072,0,0,1,16,272V177.784A15.159,15.159,0,0,1,39.193,164.93L64,180.434V310.4ZM496,275.164a15.07,15.07,0,0,1-7.125,12.854L448,313.565V180.434l24.807-15.5A15.159,15.159,0,0,1,496,177.784Z"/>
        </svg>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content> 

  <div class="ion-padding">

  <!-- Classificação de Risco -->
    <!-- <div class="ion-padding ion-text-center">
      <span class="userPart" (click)="seeClassification()">
        AUTOAVALIAÇÃO
      </span>
    </div> -->

    <div *ngIf="done" class="myGroup">

      <form (ngSubmit)="editProfile(model)" #regForm="ngForm">
        <ion-list>
          <div class="ion-text-center">
            <h4>Fatores Ambientais</h4>
          </div>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Quantas pessoas vivem na mesma casa/apartamento que você?</span>
              <ion-range pin="true" name="rangeFamilia" [(ngModel)]="model.covid.rangeFamilia" min="0" max="12" step="1" value="1" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span> &nbsp; </span>
                </ion-col>
                <ion-col>
                  <span class="neutro"> Total: </span>
                  <span class="grifar">{{ model.covid.rangeFamilia }}
                    <span *ngIf="model.covid.rangeFamilia >=12">ou mais pessoas</span>
                  </span>
                </ion-col>
                <ion-col>
                  <span> &nbsp; </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Utiliza o transporte público quantas vezes ao dia?</span>
              <ion-range pin="true" name="rangeFamilia" [(ngModel)]="model.covid.transp" min="0" max="12" step="1" value="1" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span> &nbsp; </span>
                </ion-col>
                <ion-col>
                  <span class="neutro"> Total: </span>
                  <span class="grifar">{{ model.covid.transp }}
                    <span *ngIf="model.covid.transp >=12">ou mais vezes</span>
                  </span>
                </ion-col>
                <ion-col>
                  <span> &nbsp; </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Com quantas pessoas tem contato diariamente?</span>
              <ion-range pin="true" name="rangePessoas" [(ngModel)]="model.covid.rangePessoas" min="0" max="50" step="5" value="5" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span> &nbsp; </span>
                </ion-col>
                <ion-col>
                  <span class="neutro"> Total: </span>
                  <span class="grifar">{{ model.covid.rangePessoas }}
                    <span *ngIf="model.covid.rangePessoas >=50">ou mais pessoas</span>
                  </span>
                </ion-col>
                <ion-col>
                  <span> &nbsp; </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>

          <div class="ion-text-center">
            <h4>Fatores Comportamentais</h4>
          </div>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Você se preocupa com COVID-19 no seu dia-a-dia?</span>
              <ion-range name="rangeMedo" [(ngModel)]="model.covid.rangeMedo" min="0" max="2" step="1" value="0" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span [ngClass]="model.covid.rangeMedo==0?'grifar':'neutro'"> Concordo </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeMedo==1?'grifar':'neutro'"> Neutro </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeMedo==2?'grifar':'neutro'"> Discordo </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Reduz o seu risco aplicando distanciamento social?</span>
              <ion-range name="rangeSocial" [(ngModel)]="model.covid.rangeSocial" min="0" max="2" step="1" value="0" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span [ngClass]="model.covid.rangeSocial==0?'grifar':'neutro'"> Concordo </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeSocial==1?'grifar':'neutro'"> Neutro </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeSocial==2?'grifar':'neutro'"> Discordo </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>As pessoas com quem vive aplicam distanciamento social?</span>
              <ion-range name="rangeDist" [(ngModel)]="model.covid.rangeDist" min="0" max="2" step="1" value="0" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span [ngClass]="model.covid.rangeDist==0?'grifar':'neutro'"> Concordo </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeDist==1?'grifar':'neutro'"> Neutro </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeDist==2?'grifar':'neutro'"> Discordo </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>As pessoas com quem vive costumam higienizar as mãos?</span>
              <ion-range name="rangeLavam" [(ngModel)]="model.covid.rangeLavam" min="0" max="2" step="1" value="0" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span [ngClass]="model.covid.rangeLavam==0?'grifar':'neutro'"> Concordo </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeLavam==1?'grifar':'neutro'"> Neutro </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeLavam==2?'grifar':'neutro'"> Discordo </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Você higieniza as mãos com água e sabão ou álcool 70%?</span>
              <ion-range name="rangeAlcool" [(ngModel)]="model.covid.rangeAlcool" min="0" max="2" step="1" value="0" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span [ngClass]="model.covid.rangeAlcool==0?'grifar':'neutro'"> Sempre </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeAlcool==1?'grifar':'neutro'"> Às vezes </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeAlcool==2?'grifar':'neutro'"> Raramente </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>
          <br>
          <ion-item>
            <div class="ion-text-center">
              <span>Utiliza máscara de proteção quando sai para fora de casa/apartamento?</span>
              <ion-range name="rangeMask" [(ngModel)]="model.covid.rangeMask" min="0" max="2" step="1" value="0" snaps color="covid">
                <ion-icon slot="start" size="small" name="remove-circle-outline"></ion-icon>
                <ion-icon slot="end" size="small" name="add-circle-outline"></ion-icon>
              </ion-range>
              <ion-row>
                <ion-col>
                  <span [ngClass]="model.covid.rangeMask==0?'grifar':'neutro'"> Sempre </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeMask==1?'grifar':'neutro'"> Às vezes </span>
                </ion-col>
                <ion-col>
                  <span [ngClass]="model.covid.rangeMask==2?'grifar':'neutro'"> Raramente </span>
                </ion-col>
              </ion-row>
            </div>
          </ion-item>

          <div class="ion-text-center">
            <h4>Fatores de Saúde</h4>
          </div>
          <br>
          <div class="item ion-padding ion-text-center">
            <ion-row>
              <ion-col size="6">
                <label>Teve contato com alguém com COVID-19?</label>
              </ion-col>
              <ion-col size="6">
                <ion-select class="selectPadding" [interfaceOptions]="customAlertOptions" interface="alert" 
                [(ngModel)]="model.covid.risco" name="risco" placeholder="Risco S/N" okText="Confirmar" cancelText="Cancelar">
                  <ion-select-option value=1> Sim </ion-select-option>
                  <ion-select-option value=0> Não </ion-select-option>
                </ion-select>
              </ion-col>
            </ion-row>      
          </div>
          <br>
          <div class="item ion-padding ion-text-center">
            <ion-row>
              <ion-col size="6">
                <label>Está com COVID-19?</label>
              </ion-col>
              <ion-col size="6">
                <ion-select class="selectPadding" [interfaceOptions]="customAlertOptions" interface="alert" 
                [(ngModel)]="model.covid.covid" name="covid" placeholder="Covid S/N" okText="Confirmar" cancelText="Cancelar">
                  <ion-select-option value=1> Sim </ion-select-option>
                  <ion-select-option value=0> Não </ion-select-option>
                </ion-select>
              </ion-col>
            </ion-row>      
          </div>
          <br>
          <div class="item ion-padding ion-text-center">
            <ion-row>
              <ion-col size="6">
                <label>Já teve COVID-19?</label>
              </ion-col>
              <ion-col size="6">
                <ion-select class="selectPadding" [interfaceOptions]="customAlertOptions" interface="alert" 
                [(ngModel)]="model.covid.teve" name="teve" placeholder="Teve S/N" okText="Confirmar" cancelText="Cancelar">
                  <ion-select-option value=1> Sim </ion-select-option>
                  <ion-select-option value=0> Não </ion-select-option>
                </ion-select>
              </ion-col>
            </ion-row>      
          </div>
          <br>
          <div class="item ion-padding ion-text-center">
            <ion-row>
              <ion-col size="6">
                <label>Possui algum dos sintomas (Tosse, febre, cansaço...)?</label>
              </ion-col>
              <ion-col size="6">
                <ion-select class="selectPadding" [interfaceOptions]="customAlertOptions" interface="alert" 
                [(ngModel)]="model.covid.sintomas" name="sintomas" placeholder="Sintomas S/N" okText="Confirmar" cancelText="Cancelar">
                  <ion-select-option value=1> Sim </ion-select-option>
                  <ion-select-option value=0> Não </ion-select-option>
                </ion-select>
              </ion-col>
            </ion-row>      
          </div>
          <br>
          <div class="item ion-padding ion-text-center">
            <span>Aceite os termos de uso do aplicativo:</span>
            <ion-row>
              <ion-col size="7">
                <ion-item lines="none">
                  <ion-checkbox slot="start" color="covid" name="termos" [(ngModel)]="aceptTermos"></ion-checkbox>                  
                  <label>Aceitar os termos</label>
                </ion-item>
              </ion-col>
              <ion-col size="5">
                <ion-item lines="none">
                  <label (click)="lerTermos()">Ler os termos</label>
                </ion-item>
              </ion-col>
              <p *ngIf="seeTermos" class="ion-padding ion-text-justify">
                Aceitando os termos, concordo em responder o questionário e tornar público minha classificação risco de forma anônima.
                O CovAway exibirá sua classificação com a intenção de promover uma maior segurança na locomoção entre os usuários. Ao exibir seu pin e classificação no mapa, qualquer usuário pode visualiza-lo.
                Os dados de localização do seu endereço IP podem ser precisos para até seis quilômetros. Esses dados incluem sua localização derivada do seu endereço IP. Não publicamos seu endereço IP.
                A confiança no aplicativo para orientação médica ou uso do aplicativo no comércio é estritamente proibida.
              </p>
            </ion-row>
            <ion-button [disabled]="!aceptTermos" expand="block" fill="outline" color="covid" (click)="saveClass(model)">Atualizar Respostas</ion-button>
          </div>

        </ion-list>
      </form>
    </div>
  </div>

</ion-content>
